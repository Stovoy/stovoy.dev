// Load Prism.js for proper syntax highlighting
(function() {
  if (window.Prism) return; // Already loaded

  // Load Prism CSS
  const css = document.createElement('link');
  css.rel = 'stylesheet';
  css.href = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css';
  document.head.appendChild(css);

  // Load Prism JS
  const script = document.createElement('script');
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js';
  script.onload = function() {
    // Load additional language support
    const languages = [
      'javascript',
      'typescript', 
      'rust',
      'python',
      'css',
      'json',
      'markdown',
      'bash',
      'yaml'
    ];
    
    let loadedCount = 0;
    languages.forEach(lang => {
      const langScript = document.createElement('script');
      langScript.src = `https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-${lang}.min.js`;
      langScript.onload = () => {
        loadedCount++;
        if (loadedCount === languages.length && window.Prism) {
          window.Prism.highlightAll();
        }
      };
      document.head.appendChild(langScript);
    });
  };
  document.head.appendChild(script);

  // Create hljs compatibility layer for existing code
  window.hljs = {
    highlightAll: function() {
      if (window.Prism) {
        window.Prism.highlightAll();
      }
    },
    highlightElement: function(element) {
      if (window.Prism && element) {
        window.Prism.highlightElement(element);
      }
    }
  };
})();
