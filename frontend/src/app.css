@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --rosewater: #f5e0dc;
  --flamingo: #f2cdcd;
  --pink: #f5c2e7;
  --mauve: #cba6f7;
  --red: #f38ba8;
  --maroon: #eba0ac;
  --peach: #fab387;
  --yellow: #f9e2af;
  --green: #a6e3a1;
  --teal: #94e2d5;
  --sky: #89dceb;
  --sapphire: #74c7ec;
  --blue: #89b4fa;
  --lavender: #b4befe;
  --text: #cdd6f4;
  --subtext1: #bac2de;
  --subtext0: #a6adc8;
  --overlay2: #9399b2;
  --overlay1: #7f849c;
  --overlay0: #6c7086;
  --surface2: #585b70;
  --surface1: #45475a;
  --surface0: #313244;
  --base: #1e1e2e;
  --mantle: #181825;
  --crust: #11111b;

  /* Neon accent glows */
  --glow-cyan: rgba(137, 220, 235, 0.5);
  --glow-pink: rgba(245, 194, 231, 0.4);
  --glow-green: rgba(166, 227, 161, 0.4);
  --glow-blue: rgba(137, 180, 250, 0.35);

  --game-canvas-bg: #f3f4f6;
  --shadow-dark: rgba(0, 0, 0, 0.4);
  --shadow-light: rgba(0, 0, 0, 0.2);
  --shadow-medium: rgba(0, 0, 0, 0.3);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: 'JetBrains Mono', monospace;
  background-color: var(--crust);
  color: var(--text);
  line-height: 1.6;
  overflow-x: hidden;
  min-height: 100vh;
}

/* ── Animated grid background ─────────────────────────────── */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  z-index: -2;
  background-image:
    linear-gradient(rgba(137, 220, 235, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(137, 220, 235, 0.03) 1px, transparent 1px);
  background-size: 60px 60px;
  mask-image: radial-gradient(ellipse 80% 70% at 50% 30%, black 20%, transparent 75%);
  -webkit-mask-image: radial-gradient(ellipse 80% 70% at 50% 30%, black 20%, transparent 75%);
}

/* Subtle ambient glow spots */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  z-index: -1;
  background:
    radial-gradient(800px 600px at 15% 20%, rgba(203, 166, 247, 0.04), transparent 60%),
    radial-gradient(600px 500px at 85% 70%, rgba(137, 220, 235, 0.035), transparent 55%),
    radial-gradient(900px 500px at 50% 90%, rgba(166, 227, 161, 0.025), transparent 65%);
  pointer-events: none;
}

/* ── Scan lines (subtle CRT effect) ──────────────────────── */
main::before {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.015) 2px,
    rgba(0, 0, 0, 0.015) 4px
  );
}

main {
  padding: clamp(1rem, 3vw, 2rem);
  max-width: 100%;
}

/* ── Typography ──────────────────────────────────────────── */

.typeme {
  font-size: 1.2rem;
  margin-bottom: 2rem;
  font-weight: 500;
}

.text-secondary {
  color: var(--mauve);
}

.text-background {
  color: var(--blue);
}

.cursor {
  color: var(--green);
  text-shadow: 0 0 8px var(--glow-green);
  animation: blink 1s step-end infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.terminal {
  font-size: 1.1rem;
  font-weight: 500;
  margin-left: 0;
  animation: fadeIn 0.5s ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.links {
  list-style: none;
  margin: 2rem 0;
}

.links li {
  margin: 0.5rem 0;
}

p {
  margin: 1.5rem 0;
}

a {
  color: var(--sapphire);
  text-decoration: none;
  transition: color 0.2s ease, text-shadow 0.2s ease;
}

a:hover {
  color: var(--sky);
  text-decoration: underline;
  text-shadow: 0 0 10px var(--glow-cyan);
}

h1 {
  color: var(--blue);
  font-size: 1.8rem;
  font-weight: 700;
  margin: 2.5rem 0 1.2rem 0;
}

h2 {
  color: var(--green);
  font-size: 1.4rem;
  font-weight: 650;
  margin: 2rem 0 1rem 0;
}

h3 {
  color: var(--lavender);
  margin: 2rem 0 1rem 0;
  font-weight: 600;
  font-size: 1.1rem;
}

h4, h5, h6 {
  color: var(--mauve);
}

.terminal ul {
  margin: 1rem 0;
  padding-left: 2rem;
}

.terminal li {
  margin: 0.5rem 0;
}

/* ── Scrollbar ───────────────────────────────────────────── */

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--surface2);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--overlay0);
}

/* ── Command prompt colors ───────────────────────────────── */

.cmd-user { color: var(--mauve); text-shadow: 0 0 12px rgba(203, 166, 247, 0.3); }
.cmd-host { color: var(--blue); }
.cmd-path { color: var(--yellow); }
.cmd-prompt { color: var(--green); text-shadow: 0 0 8px var(--glow-green); }
.cmd-cmd { color: var(--peach); }

.fake-command-line-spaced {
  margin-top: 1rem;
}

/* ── Game styles ─────────────────────────────────────────── */

.game-container {
  position: relative;
  width: fit-content;
  height: fit-content;
  margin: 0 auto;
  background: none;
  padding: 0;
  display: block;
}

.game-canvas {
  border: 2px solid var(--surface2);
  border-radius: 10px;
  box-shadow: 0 0 20px var(--glow-cyan), 0 0 40px var(--glow-cyan), inset 0 0 10px var(--shadow-dark);
  background: linear-gradient(45deg, var(--crust), var(--mantle));
  cursor: none;
  display: block;
}

.game-canvas:hover {
  box-shadow:
    0 0 30px var(--glow-cyan),
    0 0 60px var(--glow-cyan),
    inset 0 0 10px var(--shadow-dark);
}

.play-btn-center {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  font-size: 3rem;
  padding: 2rem 4rem;
  border: none;
  border-radius: 2rem;
  background: linear-gradient(90deg, var(--sky), var(--blue) 60%, var(--sky));
  color: var(--crust);
  font-family: 'JetBrains Mono', monospace;
  font-weight: bold;
  box-shadow: 0 0 40px var(--glow-cyan), 0 0 10px var(--glow-blue);
  cursor: pointer;
  transition: transform 0.1s, box-shadow 0.1s;
  z-index: 10;
}

.play-btn-center:hover {
  transform: translate(-50%, -50%) scale(1.08);
  box-shadow: 0 0 60px var(--glow-cyan), 0 0 20px var(--glow-blue);
}

.play-overlay, .play-btn {
  display: none !important;
}

/* ── Back button ─────────────────────────────────────────── */

.back-button-container {
  margin-bottom: 1.5rem;
}

.back-button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background-color: var(--surface0);
  border: 1px solid var(--surface1);
  border-radius: 6px;
  color: var(--subtext1);
  text-decoration: none;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.85rem;
  font-weight: 500;
  transition: all 0.2s ease;
}

.back-button:hover {
  background-color: var(--surface1);
  border-color: var(--surface2);
  color: var(--text);
  transform: translateY(-1px);
  text-shadow: none;
  text-decoration: none;
}

.back-arrow {
  font-size: 1.1rem;
  color: var(--green);
}

/* ── Code Viewer ─────────────────────────────────────────── */

.code-viewer-overlay {
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  background: rgba(17, 17, 27, 0.8);
  animation: cv-fadeIn 0.25s ease-out;
}

@keyframes cv-fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.code-viewer-modal {
  background: linear-gradient(180deg, rgba(30, 30, 46, 0.97), rgba(24, 24, 37, 0.98));
  border: 1px solid var(--surface1);
  border-radius: 12px;
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.04),
    0 24px 80px rgba(0, 0, 0, 0.65),
    0 0 60px rgba(137, 180, 250, 0.06);
  animation: cv-slideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

@keyframes cv-slideIn {
  from {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.code-viewer-chrome {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  padding: 0.65rem 1rem;
  background: var(--crust);
  border-bottom: 1px solid var(--surface0);
  flex-shrink: 0;
}

.code-viewer-chrome-left {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  min-width: 0;
}

.code-viewer-chrome-dots {
  display: flex;
  gap: 6px;
  margin-right: 0.4rem;
}

.code-viewer-chrome-dots span {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

.code-viewer-chrome-dots span:nth-child(1) { background: #f38ba8; }
.code-viewer-chrome-dots span:nth-child(2) { background: #f9e2af; }
.code-viewer-chrome-dots span:nth-child(3) { background: #a6e3a1; }

.code-viewer-chrome-title {
  color: var(--subtext0);
  font-size: 0.8rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.code-viewer-close-btn {
  background: none;
  border: 1px solid transparent;
  color: var(--overlay1);
  padding: 0.25rem 0.6rem;
  border-radius: 4px;
  cursor: pointer;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.75rem;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.code-viewer-close-btn:hover {
  color: var(--red);
  border-color: rgba(243, 139, 168, 0.3);
  background: rgba(243, 139, 168, 0.08);
}

.code-viewer-tabs {
  display: flex;
  overflow-x: auto;
  background: rgba(17, 17, 27, 0.6);
  border-bottom: 1px solid var(--surface0);
  padding: 0;
  gap: 0;
  flex-shrink: 0;
}

.code-viewer-tab {
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--overlay1);
  padding: 0.6rem 1rem;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.78rem;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.code-viewer-tab:hover {
  color: var(--subtext1);
  background: rgba(255, 255, 255, 0.02);
}

.code-viewer-tab.active {
  color: var(--sky);
  border-bottom-color: var(--sky);
  background: rgba(137, 220, 235, 0.04);
}

.code-viewer-content {
  flex: 1;
  overflow: auto;
  background: rgba(17, 17, 27, 0.4);
}

.code-viewer-pre {
  margin: 0;
  background: transparent !important;
  color: var(--text);
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.82rem;
  line-height: 1.65;
  padding: 1.25rem 1.5rem;
  overflow: auto;
  min-height: 100%;
  tab-size: 2;
}

.code-viewer-code {
  display: block;
  white-space: pre;
  overflow-wrap: normal;
  word-break: normal;
  background: transparent !important;
}

/* Floating view-code trigger (non-inline pages) */
.code-viewer-button {
  background: transparent;
  color: var(--overlay1);
  border: 1px solid var(--surface1);
  padding: 0.25rem 0.6rem;
  border-radius: 5px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.72rem;
  cursor: pointer;
  transition: all 0.15s ease;
}

.code-viewer-button:hover {
  color: var(--sky);
  border-color: var(--surface2);
  background: rgba(137, 220, 235, 0.05);
}

/* ── Syntax highlighting (Catppuccin overrides) ──────────── */

pre[class*="language-"],
code[class*="language-"] {
  background: transparent !important;
  color: var(--text) !important;
  font-family: 'JetBrains Mono', monospace !important;
}

.hljs { background: transparent !important; }

.token.comment, .token.prolog, .token.doctype, .token.cdata,
.hljs-comment, .hljs-meta {
  color: var(--overlay0) !important;
}

.token.punctuation, .hljs-punctuation {
  color: var(--subtext0) !important;
}

.token.property, .token.tag, .token.boolean, .token.number,
.token.constant, .token.symbol, .token.deleted,
.hljs-number, .hljs-literal, .hljs-tag {
  color: var(--peach) !important;
}

.token.selector, .token.attr-name, .token.string, .token.char,
.token.builtin, .token.inserted,
.hljs-string, .hljs-addition {
  color: var(--green) !important;
}

.token.operator, .token.entity, .token.url,
.language-css .token.string, .style .token.string,
.hljs-operator {
  color: var(--sky) !important;
}

.token.atrule, .token.attr-value, .token.keyword,
.hljs-keyword, .hljs-selector-tag {
  color: var(--mauve) !important;
}

.token.function, .token.class-name,
.hljs-title, .hljs-section {
  color: var(--blue) !important;
}

.token.regex, .token.important, .token.variable,
.hljs-variable, .hljs-template-variable {
  color: var(--flamingo) !important;
}

.hljs-built_in { color: var(--peach) !important; }
.hljs-type { color: var(--yellow) !important; }
.hljs-attr { color: var(--blue) !important; }
.hljs-name { color: var(--blue) !important; }
.hljs-params { color: var(--text) !important; }
.hljs-selector-class { color: var(--teal) !important; }
.hljs-deletion { color: var(--red) !important; }

.token.important, .token.bold { font-weight: bold !important; }
.token.italic { font-style: italic !important; }
.token.entity { cursor: help !important; }

/* ── Responsive ──────────────────────────────────────────── */

@media (max-width: 768px) {
  main {
    padding: 0.75rem;
  }

  .typeme, .command-line {
    font-size: 1rem;
  }
}
