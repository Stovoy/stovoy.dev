version: "3.9"

services:
  backend:
    build: .
    image: stovoy-tech-dev
    ports:
      - "8080:8080"
    volumes:
      # Mount source for live reload when running in dev mode (cargo watch)
      - .:/app
    command: ["/usr/bin/stovoy-tech"]

  frontend:
    image: ghcr.io/thedodd/trunk:latest
    working_dir: /code
    volumes:
      - .:/code
    ports:
      - "8081:8081"
    command: ["trunk", "serve", "--watch", "--config", "Trunk.toml", "--public-url", "/"]

# Frontâ€‘end container will be added once Trunk build is in place.
